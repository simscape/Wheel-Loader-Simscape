<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      -->
<title>Hydromechanical Power Split CVT with Engine</title>
<meta name="generator" content="MATLAB 25.1">
<link rel="schema.DC" href="http://purl.org/dc/elements/1.1/">
<meta name="DC.date" content="2025-10-31">
<meta name="DC.source" content="ssc_hydromech_power_split_cvt_engine.m">
<style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}

html { min-height:100%; margin-bottom:1px; }
html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }
html body td { vertical-align:top; text-align:left; }

h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }
h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }
h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }

a { color:#005fce; text-decoration:none; }
a:hover { color:#005fce; text-decoration:underline; }
a:visited { color:#004aa0; text-decoration:none; }

p { padding:0px; margin:0px 0px 20px; }
img { padding:0px; margin:0px 0px 20px; border:none; }
p img, pre img, tt img, li img, h1 img, h2 img { margin-bottom:0px; }

ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }
ul li { padding:0px; margin:0px 0px 7px 0px; }
ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }
ul li ol li { list-style:decimal; }
ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }
ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }
ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }
ol li ol li { list-style-type:lower-alpha; }
ol li ul { padding-top:7px; }
ol li ul li { list-style:square; }

.content { font-size:1.2em; line-height:140%; padding: 20px; }

pre, code { font-size:12px; }
tt { font-size: 1.2em; }
pre { margin:0px 0px 20px; }
pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }
pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }
pre.error { color:red; }

@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }

span.keyword { color:#0000FF }
span.comment { color:#228B22 }
span.string { color:#A020F0 }
span.untermstring { color:#B20000 }
span.syscmd { color:#B28C00 }
span.typesection { color:#A0522D }

.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }
.footer p { margin:0px; }
.footer a { color:#878787; }
.footer a:hover { color:#878787; text-decoration:underline; }
.footer a:visited { color:#878787; }

table th { padding:7px 5px; text-align:left; vertical-align:middle; border: 1px solid #d6d4d4; font-weight:bold; }
table td { padding:7px 5px; text-align:left; vertical-align:top; border:1px solid #d6d4d4; }





  </style>
</head>
<body>
<div class="content">
<h1>Hydromechanical Power Split CVT with Engine</h1>
<!--introduction-->
<p>This example models a vehicle with a hydromechanical power split continuously variable transmission (CVT). It contains the engine, CVT, and longitudinal vehicle with four-wheel drive. This model enables:</p>
<div>
<ul>
<li>
<b>Powertrain efficiency studies</b> to evaluate different technologies and designs to determine where power is lost</li>
<li>
<b>Powertrain control design</b> to create algorithms in Simulink and Stateflow that control the engine and CVT.</li>
</ul>
</div>
<p>(<a href="matlab:web('Wheel_Loader_Design_Overview.html')">return to Wheel Loader Design with Simscape Overview</a>)</p>
<!--/introduction-->
<h2>Contents</h2>
<div>
<ul>
<li>
<a href="#1">Model</a>
</li>
<li>
<a href="#2">Vehicle with CVT Subsystem</a>
</li>
<li>
<a href="#3">Transmission Variant Subsystems</a>
</li>
<li>
<a href="#4">Power Split Hydromechanical CVT Subsystem</a>
</li>
<li>
<a href="#5">Hydrostatic Transmission Subsystem</a>
</li>
<li>
<a href="#6">Electrical Transmission Subsystem</a>
</li>
<li>
<a href="#7">Abstract CVT Subsystem</a>
</li>
<li>
<a href="#8">Driveline Subsystem</a>
</li>
<li>
<a href="#9">Tires and Body Subsystem</a>
</li>
<li>
<a href="#10">Simulation Results: Load Cycle, Power Split CVT</a>
</li>
<li>
<a href="#11">Simulation Results: Load Cycle, Abstract CVT</a>
</li>
<li>
<a href="#13">Simulation Results: Accelerate and Decelerate, Hydrostatic CVT</a>
</li>
<li>
<a href="#15">Simulation Results: Accelerate and Decelerate, Electrical CVT</a>
</li>
<li>
<a href="#17">Comparison of CVT Models</a>
</li>
<li>
<a href="#18">Explore Effect of Hydraulic Regenerative Braking</a>
</li>
</ul>
</div>
<h2 id="1">Model</h2>
<p>This example models a vehicle with a hydromechanical power split continuously variable transmission (CVT).</p>
<p>
<a href="matlab:open_system('ssc_hydromech_power_split_cvt_engine');">Open Model</a>
</p>
<img vspace="5" hspace="5" src="ssc_hydromech_power_split_cvt_engine_01.png" alt=""> <h2 id="2">Vehicle with CVT Subsystem</h2>
<p>Models engine, transmission, and vehicle. The engine can be configured to have droop control or a simple PI control. The transmission can be swapped between multiple options to explore different technologies or to select a fidelity level appropriate for the current test. The vehicle model includes the driveline and chassis.</p>
<p>
<a href="matlab:open_system('ssc_hydromech_power_split_cvt_engine');open_system('ssc_hydromech_power_split_cvt_engine/Vehicle%20with%20CVT','force');">Open Subsystem</a>
</p>
<img vspace="5" hspace="5" src="ssc_hydromech_power_split_cvt_engine_02.png" alt=""> <h2 id="3">Transmission Variant Subsystems</h2>
<p>Four options for modeling the CVT are included in the model. Using variant subsystems, one of them can be activated for a test. The subsystems all have the same interface, which includes a mechanical connection to the engine and a mechanical connection to the driveline. Intefaces based on physical connections are particularly well-suited to swapping between models of different technologies or fidelity.</p>
<p>
<a href="matlab:open_system('ssc_hydromech_power_split_cvt_engine');open_system('ssc_hydromech_power_split_cvt_engine/Vehicle%20with%20CVT/Transmission','force');">Open Subsystem</a>
</p>
<img vspace="5" hspace="5" src="ssc_hydromech_power_split_cvt_engine_03.png" alt=""> <h2 id="4">Power Split Hydromechanical CVT Subsystem</h2>
<p>Transmission with four planetary gears, clutches, and a parallel power path through a hydrostatic transmission. A hydraulic regenerative braking system is also included to improve fuel economy by storing kinetic energy as pressure in an accumulator.</p>
<p>
<a href="matlab:open_system('ssc_hydromech_power_split_cvt_engine');open_system('ssc_hydromech_power_split_cvt_engine/Vehicle%20with%20CVT/Transmission/Power%20Split%20Hydromech','force');">Open Subsystem</a>
</p>
<img vspace="5" hspace="5" src="ssc_hydromech_power_split_cvt_engine_04.png" alt=""> <h2 id="5">Hydrostatic Transmission Subsystem</h2>
<p>Hydrostatic transmission with variable-displacement pump and fixed-displacement motor. This system alone can also serve as a CVT, but it is not as efficient as the power-split design, as the mechanical path has a higher efficiency.</p>
<p>
<a href="matlab:open_system('ssc_hydromech_power_split_cvt_engine');open_system('ssc_hydromech_power_split_cvt_engine/Vehicle%20with%20CVT/Transmission/Hydrostatic','force');">Open Subsystem</a>
</p>
<img vspace="5" hspace="5" src="ssc_hydromech_power_split_cvt_engine_05.png" alt=""> <h2 id="6">Electrical Transmission Subsystem</h2>
<p>Electrical transmission with generator, motor, and battery. The input shaft drives a generator which is electrically connected to a motor which mechanically connected to the drivetrain. A control system adjusts the torque request to the generator and motor so that the desired ratio of (input shaft speed/output shaft speed) is achieved.</p>
<p>The power source on the DC bus maintains stability of the DC bus and provides the current required of the motor that the generator cannot provide. This can be due to variations in time constants for the motor and generator or if the generator reaches its power limit.</p>
<p>
<a href="matlab:open_system('ssc_hydromech_power_split_cvt_engine');open_system('ssc_hydromech_power_split_cvt_engine/Vehicle%20with%20CVT/Transmission/Electrical','force');">Open Subsystem</a>
</p>
<img vspace="5" hspace="5" src="ssc_hydromech_power_split_cvt_engine_06.png" alt=""> <h2 id="7">Abstract CVT Subsystem</h2>
<p>Models a CVT as a variable ratio gear. This model can be used in early stages of development to refine requirements for the transmission. It can also be tuned to match a more detailed model of the CVT so as to provide accurate behavior with less computation.</p>
<p>
<a href="matlab:open_system('ssc_hydromech_power_split_cvt');open_system('ssc_hydromech_power_split_cvt/Vehicle%20with%20CVT/Transmission/Abstract','force');">Open Subsystem</a>
</p>
<img vspace="5" hspace="5" src="ssc_hydromech_power_split_cvt_engine_07.png" alt=""> <h2 id="8">Driveline Subsystem</h2>
<p>Models a four-wheel drive driveline. The output of the CVT connects to the output transfer gear which is connected via differentials to all four wheels.</p>
<p>
<a href="matlab:open_system('ssc_hydromech_power_split_cvt_engine');open_system('ssc_hydromech_power_split_cvt_engine/Vehicle%20with%20CVT/Vehicle/Driveline','force');">Open Subsystem</a>
</p>
<img vspace="5" hspace="5" src="ssc_hydromech_power_split_cvt_engine_08.png" alt=""> <h2 id="9">Tires and Body Subsystem</h2>
<p>Models the chassis and tires of the vehicle.</p>
<p>
<a href="matlab:open_system('ssc_hydromech_power_split_cvt_engine/Vehicle%20with%20CVT/Vehicle/Tires%20and%20Body');open_system('ssc_hydromech_power_split_cvt_engine/Vehicle%20with%20CVT/Vehicle/Tires%20and%20Body','force');">Open Subsystem</a>
</p>
<img vspace="5" hspace="5" src="ssc_hydromech_power_split_cvt_engine_09.png" alt=""> <h2 id="10">Simulation Results: Load Cycle, Power Split CVT</h2>
<p>Run load cycle with the power split CVT.</p>
<pre class="codeoutput">Elapsed Sim Time = 21.9101
</pre>
<img vspace="5" hspace="5" src="ssc_hydromech_power_split_cvt_engine_10.png" alt=""> <img vspace="5" hspace="5" src="ssc_hydromech_power_split_cvt_engine_11.png" alt=""> <img vspace="5" hspace="5" src="ssc_hydromech_power_split_cvt_engine_12.png" alt=""> <img vspace="5" hspace="5" src="ssc_hydromech_power_split_cvt_engine_13.png" alt=""> <h2 id="11">Simulation Results: Load Cycle, Abstract CVT</h2>
<p>Run load cycle with the abstract split CVT.</p>
<pre class="codeoutput">Elapsed Sim Time = 2.4697
</pre>
<img vspace="5" hspace="5" src="ssc_hydromech_power_split_cvt_engine_14.png" alt=""> <img vspace="5" hspace="5" src="ssc_hydromech_power_split_cvt_engine_15.png" alt=""> <h2 id="13">Simulation Results: Accelerate and Decelerate, Hydrostatic CVT</h2>
<p>Run load cycle with the hydrostatic CVT.</p>
<pre class="codeoutput">Elapsed Sim Time = 3.4624
</pre>
<img vspace="5" hspace="5" src="ssc_hydromech_power_split_cvt_engine_16.png" alt=""> <img vspace="5" hspace="5" src="ssc_hydromech_power_split_cvt_engine_17.png" alt=""> <img vspace="5" hspace="5" src="ssc_hydromech_power_split_cvt_engine_18.png" alt=""> <h2 id="15">Simulation Results: Accelerate and Decelerate, Electrical CVT</h2>
<p>Run load cycle with the electrical CVT.</p>
<pre class="codeoutput">Elapsed Sim Time = 2.4845
</pre>
<img vspace="5" hspace="5" src="ssc_hydromech_power_split_cvt_engine_19.png" alt=""> <img vspace="5" hspace="5" src="ssc_hydromech_power_split_cvt_engine_20.png" alt=""> <img vspace="5" hspace="5" src="ssc_hydromech_power_split_cvt_engine_21.png" alt=""> <h2 id="17">Comparison of CVT Models</h2>
<p>The following plot compares the input torque for tests with the power split CVT and the abstract CVT models. This load cycle has long periods of time where the loader is not moving. During periods when the loader is standing still, the power split CVT has higher losses because the hydrostatic transmission and other shafts are spinning.</p>
<img vspace="5" hspace="5" src="ssc_hydromech_power_split_cvt_engine_22.png" alt=""> <h2 id="18">Explore Effect of Hydraulic Regenerative Braking</h2>
<p>The following plot compares a test with and without the hydraulic regenerative braking (HRB) system. The HRB stores energy in an accumulator during braking events, and releases that energy to accelerate the vehicle. This system increases the efficiency of the vehicle and reduces the demand on the engine.</p>
<p>The plot below shows an acceleration and deceleration profile. During the acceleration phase (between 11 and 12 seconds), the engine needs to provide more power if the HRB is disabled. During the deceleration phase, the sign of the HRB power is negative indicating energy is being stored in the HRB.</p>
<pre class="codeoutput">Elapsed Sim Time = 21.1926
Elapsed Sim Time = 22.8955
</pre>
<img vspace="5" hspace="5" src="ssc_hydromech_power_split_cvt_engine_23.png" alt=""> <p class="footer">Copyright 2023-2025 The MathWorks, Inc.<br>
<a href="https://www.mathworks.com/products/matlab/">Published with MATLAB&reg; R2025a</a>
<br>
</p>
</div>
<!--
##### SOURCE BEGIN #####
%% Hydromechanical Power Split CVT with Engine
% 
% This example models a vehicle with a hydromechanical power split
% continuously variable transmission (CVT).  It contains the engine, CVT,
% and longitudinal vehicle with four-wheel drive. This model enables:
%
% * *Powertrain efficiency studies* to evaluate different technologies and
% designs to determine where power is lost
% * *Powertrain control design* to create algorithms in Simulink and
% Stateflow that control the engine and CVT.
%
% (<matlab:web('Wheel_Loader_Design_Overview.html') return to Wheel Loader Design with Simscape Overview>)
%
% Copyright 2023-2025 The MathWorks, Inc.

%% Model
%
% This example models a vehicle with a hydromechanical power split
% continuously variable transmission (CVT).
%
% <matlab:open_system('ssc_hydromech_power_split_cvt_engine'); Open Model>

open_system('ssc_hydromech_power_split_cvt_engine')
set_param(bdroot,'LibraryLinkDisplay','none')
set_param([bdroot '/Vehicle with CVT/Transmission'],'LabelModeActiveChoice','Power_Split_HM')
set_param([bdroot '/Vehicle with CVT/Engine'],'LabelModeActiveChoice','Droop')
set_param(find_system('ssc_hydromech_power_split_cvt_engine','MatchFilter',@Simulink.match.allVariants,'FindAll', 'on','type','annotation','Tag','ModelFeatures'),'Interpreter','off')

%% Vehicle with CVT Subsystem
%
% Models engine, transmission, and vehicle.  The engine can be configured
% to have droop control or a simple PI control.  The transmission can be
% swapped between multiple options to explore different technologies or to
% select a fidelity level appropriate for the current test.  The vehicle
% model includes the driveline and chassis.
%
% <matlab:open_system('ssc_hydromech_power_split_cvt_engine');open_system('ssc_hydromech_power_split_cvt_engine/Vehicle%20with%20CVT','force'); Open Subsystem>

set_param('ssc_hydromech_power_split_cvt_engine/Vehicle with CVT','LinkStatus','none')
open_system('ssc_hydromech_power_split_cvt_engine/Vehicle with CVT','force')
set_param(find_system('ssc_hydromech_power_split_cvt_engine','MatchFilter',@Simulink.match.allVariants,'FindAll', 'on','type','annotation','Tag','ModelFeatures'),'Interpreter','off')

%% Transmission Variant Subsystems
%
% Four options for modeling the CVT are included in the model.  Using
% variant subsystems, one of them can be activated for a test.  The
% subsystems all have the same interface, which includes a mechanical
% connection to the engine and a mechanical connection to the driveline.
% Intefaces based on physical connections are particularly well-suited to
% swapping between models of different technologies or fidelity.
%
% <matlab:open_system('ssc_hydromech_power_split_cvt_engine');open_system('ssc_hydromech_power_split_cvt_engine/Vehicle%20with%20CVT/Transmission','force'); Open Subsystem>

set_param('ssc_hydromech_power_split_cvt_engine/Vehicle with CVT/Transmission','LinkStatus','none')
open_system('ssc_hydromech_power_split_cvt_engine/Vehicle with CVT/Transmission','force')

%% Power Split Hydromechanical CVT Subsystem
%
% Transmission with four planetary gears, clutches, and a parallel power
% path through a hydrostatic transmission. A hydraulic regenerative braking
% system is also included to improve fuel economy by storing kinetic energy
% as pressure in an accumulator.
%
% <matlab:open_system('ssc_hydromech_power_split_cvt_engine');open_system('ssc_hydromech_power_split_cvt_engine/Vehicle%20with%20CVT/Transmission/Power%20Split%20Hydromech','force'); Open Subsystem>

set_param('ssc_hydromech_power_split_cvt_engine/Vehicle with CVT/Transmission/Power Split Hydromech','LinkStatus','none')
open_system('ssc_hydromech_power_split_cvt_engine/Vehicle with CVT/Transmission/Power Split Hydromech','force')

%% Hydrostatic Transmission Subsystem
%
% Hydrostatic transmission with variable-displacement pump and
% fixed-displacement motor.  This system alone can also serve as a CVT, but
% it is not as efficient as the power-split design, as the mechanical path
% has a higher efficiency.
%
% <matlab:open_system('ssc_hydromech_power_split_cvt_engine');open_system('ssc_hydromech_power_split_cvt_engine/Vehicle%20with%20CVT/Transmission/Hydrostatic','force'); Open Subsystem>

set_param('ssc_hydromech_power_split_cvt_engine/Vehicle with CVT/Transmission/Power Split Hydromech/Hydrostatic','LinkStatus','none')
open_system('ssc_hydromech_power_split_cvt_engine/Vehicle with CVT/Transmission/Power Split Hydromech/Hydrostatic','force')

%% Electrical Transmission Subsystem
%
% Electrical transmission with generator, motor, and battery.  The input
% shaft drives a generator which is electrically connected to a motor which
% mechanically connected to the drivetrain.  A control system adjusts the
% torque request to the generator and motor so that the desired ratio of
% (input shaft speed/output shaft speed) is achieved.
% 
% The power source on the DC bus maintains stability of the DC bus and
% provides the current required of the motor that the generator cannot
% provide.  This can be due to variations in time constants for the motor
% and generator or if the generator reaches its power limit. 
%
% <matlab:open_system('ssc_hydromech_power_split_cvt_engine');open_system('ssc_hydromech_power_split_cvt_engine/Vehicle%20with%20CVT/Transmission/Electrical','force'); Open Subsystem>

set_param([bdroot '/Vehicle with CVT/Transmission'],'LabelModeActiveChoice','Electrical')
set_param('ssc_hydromech_power_split_cvt_engine/Vehicle with CVT/Transmission/Electrical','LinkStatus','none')
open_system('ssc_hydromech_power_split_cvt_engine/Vehicle with CVT/Transmission/Electrical','force')
set_param(bdroot,'SimulationCommand','update')

%% Abstract CVT Subsystem
%
% Models a CVT as a variable ratio gear. This model can be used in early
% stages of development to refine requirements for the transmission.  It
% can also be tuned to match a more detailed model of the CVT so as to
% provide accurate behavior with less computation.
%
% <matlab:open_system('ssc_hydromech_power_split_cvt');open_system('ssc_hydromech_power_split_cvt/Vehicle%20with%20CVT/Transmission/Abstract','force'); Open Subsystem>

set_param([bdroot '/Vehicle with CVT/Transmission'],'LabelModeActiveChoice','Abstract')
set_param('ssc_hydromech_power_split_cvt_engine/Vehicle with CVT/Transmission/Abstract','LinkStatus','none')
open_system('ssc_hydromech_power_split_cvt_engine/Vehicle with CVT/Transmission/Abstract','force')
set_param(bdroot,'SimulationCommand','update')


%% Driveline Subsystem
%
% Models a four-wheel drive driveline.  The output of the CVT connects to
% the output transfer gear which is connected via differentials to all four
% wheels.
%
% <matlab:open_system('ssc_hydromech_power_split_cvt_engine');open_system('ssc_hydromech_power_split_cvt_engine/Vehicle%20with%20CVT/Vehicle/Driveline','force'); Open Subsystem>

set_param('ssc_hydromech_power_split_cvt_engine/Vehicle with CVT/Vehicle/Driveline','LinkStatus','none')
open_system('ssc_hydromech_power_split_cvt_engine/Vehicle with CVT/Vehicle/Driveline','force')

%% Tires and Body Subsystem
%
% Models the chassis and tires of the vehicle.
%
% <matlab:open_system('ssc_hydromech_power_split_cvt_engine/Vehicle%20with%20CVT/Vehicle/Tires%20and%20Body');open_system('ssc_hydromech_power_split_cvt_engine/Vehicle%20with%20CVT/Vehicle/Tires%20and%20Body','force'); Open Subsystem>

set_param('ssc_hydromech_power_split_cvt_engine/Vehicle with CVT/Vehicle/Tires and Body','LinkStatus','none')
open_system('ssc_hydromech_power_split_cvt_engine/Vehicle with CVT/Vehicle/Tires and Body','force')


%% Simulation Results: Load Cycle, Power Split CVT
%
% Run load cycle with the power split CVT.
%

set_param([bdroot '/Vehicle with CVT/Transmission'],'LabelModeActiveChoice','Power_Split_HM')
set_param([bdroot '/Vehicle with CVT/Engine'],'LabelModeActiveChoice','Droop')

sim('ssc_hydromech_power_split_cvt_engine');
ssc_hydromech_power_split_cvt_plot1whlspd(simlog_ssc_hydromech_power_split_cvt_engine.Vehicle_with_CVT,HMPST.Tire.Rad)
ssc_hydromech_power_split_cvt_plot3torque(simlog_ssc_hydromech_power_split_cvt_engine.Vehicle_with_CVT)
ssc_hydromech_power_split_cvt_plot2pressure(simlog_ssc_hydromech_power_split_cvt_engine.Vehicle_with_CVT.Transmission)
sm_wheel_loader_plot3clutches(simlog_ssc_hydromech_power_split_cvt_engine.Vehicle_with_CVT.Transmission)

% Get engine torque data
trqPSP = simlog_ssc_hydromech_power_split_cvt_engine.Vehicle_with_CVT.Engine.Engine_Droop.Torque_Sensor.Torque_Sensor.t.series.values('N*m');
timPSP = simlog_ssc_hydromech_power_split_cvt_engine.Vehicle_with_CVT.Engine.Engine_Droop.Torque_Sensor.Torque_Sensor.t.series.time;
CVTLoss_PSP = calcPowerLossCVT(simlog_ssc_hydromech_power_split_cvt_engine.Vehicle_with_CVT);

%% Simulation Results: Load Cycle, Abstract CVT
%
% Run load cycle with the abstract split CVT.
%

set_param([bdroot '/Vehicle with CVT/Transmission'],'LabelModeActiveChoice','Abstract')

%%
sim('ssc_hydromech_power_split_cvt_engine');
ssc_hydromech_power_split_cvt_plot1whlspd(simlog_ssc_hydromech_power_split_cvt_engine.Vehicle_with_CVT,HMPST.Tire.Rad)
ssc_hydromech_power_split_cvt_plot3torque(simlog_ssc_hydromech_power_split_cvt_engine.Vehicle_with_CVT)
ssc_hydromech_power_split_cvt_plot2pressure(simlog_ssc_hydromech_power_split_cvt_engine.Vehicle_with_CVT.Transmission)
sm_wheel_loader_plot3clutches(simlog_ssc_hydromech_power_split_cvt_engine.Vehicle_with_CVT.Transmission)

% Get engine torque data
trqAbs = simlog_ssc_hydromech_power_split_cvt_engine.Vehicle_with_CVT.Engine.Engine_Droop.Torque_Sensor.Torque_Sensor.t.series.values('N*m');
timAbs = simlog_ssc_hydromech_power_split_cvt_engine.Vehicle_with_CVT.Engine.Engine_Droop.Torque_Sensor.Torque_Sensor.t.series.time;
CVTLoss_Abs = calcPowerLossCVT(simlog_ssc_hydromech_power_split_cvt_engine.Vehicle_with_CVT);

%% Simulation Results: Accelerate and Decelerate, Hydrostatic CVT 
%
% Run load cycle with the hydrostatic CVT.
%

set_param([bdroot '/Vehicle with CVT/Transmission'],'LabelModeActiveChoice','Hydrostatic')

%%
sim('ssc_hydromech_power_split_cvt_engine');
ssc_hydromech_power_split_cvt_plot1whlspd(simlog_ssc_hydromech_power_split_cvt_engine.Vehicle_with_CVT,HMPST.Tire.Rad)
ssc_hydromech_power_split_cvt_plot3torque(simlog_ssc_hydromech_power_split_cvt_engine.Vehicle_with_CVT)
ssc_hydromech_power_split_cvt_plot2pressure(simlog_ssc_hydromech_power_split_cvt_engine.Vehicle_with_CVT.Transmission)
sm_wheel_loader_plot3clutches(simlog_ssc_hydromech_power_split_cvt_engine.Vehicle_with_CVT)

% Get engine torque data, CVT losses
trqHst = simlog_ssc_hydromech_power_split_cvt_engine.Vehicle_with_CVT.Engine.Engine_Droop.Torque_Sensor.Torque_Sensor.t.series.values('N*m');
timHst = simlog_ssc_hydromech_power_split_cvt_engine.Vehicle_with_CVT.Engine.Engine_Droop.Torque_Sensor.Torque_Sensor.t.series.time;
CVTLoss_HST = calcPowerLossCVT(simlog_ssc_hydromech_power_split_cvt_engine.Vehicle_with_CVT);

%% Simulation Results: Accelerate and Decelerate, Electrical CVT 
%
% Run load cycle with the electrical CVT.
%

set_param([bdroot '/Vehicle with CVT/Transmission'],'LabelModeActiveChoice','Electrical')

%%
sim('ssc_hydromech_power_split_cvt_engine');
ssc_hydromech_power_split_cvt_plot1whlspd(simlog_ssc_hydromech_power_split_cvt_engine.Vehicle_with_CVT,HMPST.Tire.Rad)
ssc_hydromech_power_split_cvt_plot3torque(simlog_ssc_hydromech_power_split_cvt_engine.Vehicle_with_CVT)
ssc_hydromech_power_split_cvt_plot4ecvtcurrent(simlog_ssc_hydromech_power_split_cvt_engine.Vehicle_with_CVT.Transmission)
sm_wheel_loader_plot3clutches(simlog_ssc_hydromech_power_split_cvt_engine.Vehicle_with_CVT)

% Get engine torque data, CVT losses
trqEle = simlog_ssc_hydromech_power_split_cvt_engine.Vehicle_with_CVT.Engine.Engine_Droop.Torque_Sensor.Torque_Sensor.t.series.values('N*m');
timEle = simlog_ssc_hydromech_power_split_cvt_engine.Vehicle_with_CVT.Engine.Engine_Droop.Torque_Sensor.Torque_Sensor.t.series.time;
CVTLoss_Ele = calcPowerLossCVT(simlog_ssc_hydromech_power_split_cvt_engine.Vehicle_with_CVT);

%% Comparison of CVT Models
%
% The following plot compares the input torque for tests with the power
% split CVT and the abstract CVT models.  This load cycle has long periods
% of time where the loader is not moving. During periods when the loader is
% standing still, the power split CVT has higher losses because the
% hydrostatic transmission and other shafts are spinning.  

figure(44)
plot(timPSP,trqPSP,'LineWidth',1,'DisplayName',['Power Split: CVT Losses ' sprintf('%3.2f',CVTLoss_PSP)]);
hold on
plot(timAbs,trqAbs,'LineWidth',2,'DisplayName',['Abstract:      CVT Losses ' sprintf('%3.2f',CVTLoss_Abs)]);
plot(timHst,trqHst,'LineWidth',2,'DisplayName',['Hydrostatic: CVT Losses ' sprintf('%3.2f',CVTLoss_HST)]);
plot(timEle,trqEle,'LineWidth',2,'DisplayName',['Electrical:    CVT Losses ' sprintf('%3.2f',CVTLoss_Ele)]);
hold off
ylabel('CVT Input Torque (N*m)')
xlabel('Time (s)');
yRange = abs(max([trqAbs;trqHst])-min([trqAbs;trqHst]));
set(gca,'YLim',[min([trqAbs;trqHst])-0.1*yRange max([trqAbs;trqHst])+0.1*yRange])
legend('Location','Best')
title('Comparison of CVT Models')

%% Explore Effect of Hydraulic Regenerative Braking
%
% The following plot compares a test with and without the hydraulic
% regenerative braking (HRB) system.  The HRB stores energy in an
% accumulator during braking events, and releases that energy to
% accelerate the vehicle.  This system increases the efficiency of the
% vehicle and reduces the demand on the engine.
%
% The plot below shows an acceleration and deceleration profile. During the
% acceleration phase (between 11 and 12 seconds), the engine needs to
% provide more power if the HRB is disabled.  During the deceleration
% phase, the sign of the HRB power is negative indicating energy is being
% stored in the HRB.

ssc_hydromech_power_split_cvt_engine_plot3hrb

%%

close all
bdclose('ssc_hydromech_power_split_cvt_engine');

##### SOURCE END #####
-->
</body>
</html>
